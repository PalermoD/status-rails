<% provide(:title, "Edit user") %>
<h1>Update your profile</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@user) do |f| %>
       <%= render 'shared/error_messages', object: f.object %>
       <label class="custom-file-upload col-md-12 col-sm-12 col-xs-12">
         <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png', :onchange => "readURL(this)" %>
             <i class="fa fa-camera" aria-hidden="true"></i> Upload Profile Image
       </label>

      <img id="img_prev"  />
      <%= f.label :name %>
      <%= f.text_field :name, class: 'form-control' %>

      <%= f.label :email %>
      <%= f.email_field :email, class: 'form-control' %>

      <%= f.label :bio %>
      <%= f.text_field :bio, class: 'form-control' %>

      <label class="custom-file-upload col-md-12 col-sm-12 col-xs-12">
        <%= f.file_field :hero, accept: 'image/jpeg,image/gif,image/png', :onchange => "readURL(this)" %>
            <i class="fa fa-camera" aria-hidden="true"></i> Upload hero Image
      </label>

      <%= f.submit "Save changes", class: "btn btn-primary" %>





    <% end %>
  </div>
</div>

<script type="text/javascript">

document.getElementById("uploadBtn").onchange = function () {
    document.getElementById("uploadFile").value = this.value;
};

function readURL(input) {
    console.log('what up')
        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            $('#img_prev')
              .attr('src', e.target.result)
              .width('100%')

          };

          reader.readAsDataURL(input.files[0]);
        }
      }




  $('#micropost_picture').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 10) {
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  });
</script>
